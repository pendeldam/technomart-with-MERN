const modalWindows=document.querySelectorAll(".modal"),modalCloseBtns=document.querySelectorAll(".modal-close-btn");[...modalCloseBtns].forEach(e=>{e.addEventListener("click",e=>{e.target.parentNode.classList.remove("modal--active"),e.target.parentNode.classList.remove("modal--error")})}),[...modalWindows].forEach(e=>{document.addEventListener("keydown",r=>{!e.classList.contains("modal--active")||"Esc"!==r.key&&"Escape"!==r.key||(e.classList.remove("modal--active"),e.classList.remove("modal--error"))})});const modalFeedback=document.querySelector(".modal-feedback"),feedbackLink=document.querySelector(".contacts .site-link"),feedbackUserName=modalFeedback.querySelector("#modal-feedback__user-name"),feedbackUserMail=modalFeedback.querySelector("#modal-feedback__user-mail"),feedbackMessage=modalFeedback.querySelector("#modal-feedback__message");let isLocalStorageExist=!0,storedUserName="",storedUserMail="";try{storedUserName=localStorage.getItem("userName"),storedUserMail=localStorage.getItem("userMail")}catch(e){throw isLocalStorageExist=!1,new Error(e)}feedbackLink.addEventListener("click",e=>{e.preventDefault(),modalFeedback.classList.add("modal--active"),storedUserName?(feedbackUserName.value=storedUserName,feedbackUserMail.value=storedUserMail,feedbackMessage.focus()):feedbackUserName.focus()}),modalFeedback.querySelector("form").addEventListener("submit",e=>{feedbackUserName.value&&feedbackUserMail.value?isLocalStorageExist&&(localStorage.setItem("userName",feedbackUserName.value),localStorage.setItem("userMail",feedbackUserMail.value)):(e.preventDefault(),modalFeedback.classList.remove("modal--error"),modalFeedback.offsetWidth=modalFeedback.offsetWidth,modalFeedback.classList.add("modal--error"))});const modalMap=document.querySelector(".modal-map"),mapLink=document.querySelector(".contacts__map-link");mapLink.addEventListener("click",e=>{e.preventDefault(),modalMap.classList.add("modal--active")});const modalInCart=document.querySelector(".modal-in-cart"),productCard=document.querySelectorAll(".catalog-product-card"),productBuyBtns=document.querySelectorAll(".catalog-product-card__buy-btn");[...productCard].forEach(e=>{e.addEventListener("mouseover",()=>{e.querySelector("img").style.display="none",e.querySelector(".catalog-product-card__popup").style.display="block"}),e.addEventListener("mouseout",()=>{e.querySelector("img").style.display="block",e.querySelector(".catalog-product-card__popup").style.display="none"})}),[...productBuyBtns].forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),modalInCart.classList.add("modal--active")})});const promoSlider=document.querySelector(".promo-slider"),promoSliderNav=promoSlider.querySelector(".promo-slider__nav"),promoSliderNavBtns=promoSliderNav.querySelectorAll("button"),promoSliderControls=promoSlider.querySelector(".promo-slider__controls"),promoSliderControlsBtns=promoSliderControls.querySelectorAll("button"),slideCount=promoSlider.querySelectorAll(".promo-slider__list-item").length,disableSlide=e=>{promoSlider.classList.remove(`promo-slider__slide-${e}`),promoSlider.querySelector(`.promo-slider__list-item:nth-child(${e})`).classList.remove("promo-slider__list-item--active"),promoSliderControls.querySelector(`button:nth-child(${e})`).classList.remove("promo-slider__controls--active")},enableSlide=e=>{promoSlider.classList.add(`promo-slider__slide-${e}`),promoSlider.querySelector(`.promo-slider__list-item:nth-child(${e})`).classList.add("promo-slider__list-item--active"),promoSliderControls.querySelector(`button:nth-child(${e})`).classList.add("promo-slider__controls--active")},changeSlide=e=>{1===currentSlide?(disableSlide(currentSlide),currentSlide="prev"===e.target.dataset.id?currentSlide=slideCount:currentSlide+=1,enableSlide(currentSlide)):currentSlide===slideCount?(disableSlide(currentSlide),currentSlide="prev"===e.target.dataset.id?currentSlide-=1:currentSlide=1,enableSlide(currentSlide)):(disableSlide(currentSlide),currentSlide="prev"===e.target.dataset.id?currentSlide-=1:currentSlide+=1,enableSlide(currentSlide))};let currentSlide=1;[...promoSliderNavBtns].forEach(e=>{e.addEventListener("click",changeSlide)}),[...promoSliderControlsBtns].forEach(e=>{e.addEventListener("click",e=>{const r=+e.target.dataset.id;currentSlide!==r&&(disableSlide(currentSlide),enableSlide(currentSlide=r))})});const services=document.querySelector(".services"),servicesTabs=services.querySelectorAll("button");servicesTabs.forEach(e=>{e.addEventListener("click",e=>{const r=e.target.dataset.id,t=services.querySelector(".services-list__item--active"),l=services.querySelector(".services-desc-list__item--active");e.target.parentElement.classList.contains("services-list__item--active")||(t.classList.remove("services-list__item--active"),l.classList.remove("services-desc-list__item--active"),e.target.parentElement.classList.add("services-list__item--active"),services.querySelector(`.services-desc-list__item[data-id=${r}]`).classList.add("services-desc-list__item--active"))})});
